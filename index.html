<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>오늘의 감정 기반 커피 · 차 추천</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    body {
      background: #111;
      color: #f5f5f5;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }
    .app {
      width: 100%;
      max-width: 480px;
      background: #181818;
      border-radius: 24px;
      padding: 24px 20px 28px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
    }
    .title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .subtitle {
      font-size: 13px;
      color: #aaaaaa;
      margin-bottom: 16px;
    }
    .question {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 16px;
    }
    .section-label {
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #888;
      margin-bottom: 6px;
    }
    .grid {
      display: grid;
      gap: 14px;
      margin-bottom: 18px;
      justify-items: center;
    }
    .grid.colors {
      grid-template-columns: repeat(4, 1fr);
    }
    .grid.shapes {
      grid-template-columns: repeat(3, 1fr);
    }
    button.option {
      border: none;
      border-radius: 18px;
      padding: 12px;
      background: #262626;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.12s ease, outline 0.12s ease;
      width: 72px;
      height: 72px;
    }
    button.option.selected {
      outline: 2px solid #ffffff;
      box-shadow: 0 0 0 1px rgba(255,255,255,0.2);
      transform: translateY(-1px);
      background: #303030;
    }
    .color-circle {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.35);
    }
    .shape-icon {
      width: 40px;
      height: 40px;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .shape-circle {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 2px solid #f5f5f5;
    }
    .shape-square {
      width: 28px;
      height: 28px;
      border: 2px solid #f5f5f5;
    }
    .shape-triangle {
      width: 0;
      height: 0;
      border-left: 16px solid transparent;
      border-right: 16px solid transparent;
      border-bottom: 28px solid #f5f5f5;
    }
    .shape-curve {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 2px solid transparent;
      border-top-color: #f5f5f5;
      border-right-color: #f5f5f5;
      transform: rotate(20deg);
    }
    .shape-line {
      width: 30px;
      height: 2px;
      background: #f5f5f5;
    }
    .shape-irregular {
      width: 26px;
      height: 26px;
      border-radius: 40% 65% 35% 70%;
      border: 2px solid #f5f5f5;
      transform: rotate(-12deg);
    }
    .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
      gap: 8px;
    }
    .btn {
      border-radius: 999px;
      border: none;
      padding: 10px 16px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.12s ease, transform 0.08s ease, box-shadow 0.08s ease;
    }
    .btn.primary {
      background: #ffffff;
      color: #111;
      flex: 1;
    }
    .btn.secondary {
      background: #2b2b2b;
      color: #f5f5f5;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: none;
    }
    .result-card {
      margin-top: 10px;
      padding: 16px 14px;
      border-radius: 18px;
      background: #202020;
      border: 1px solid #333;
    }
    .result-tag {
      display: inline-flex;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 10px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: #333;
      color: #bbb;
      margin-bottom: 8px;
    }
    .result-emotion {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .result-text {
      font-size: 12px;
      color: #cccccc;
      margin-bottom: 10px;
      line-height: 1.5;
    }
    .result-subtitle {
      font-size: 11px;
      color: #999;
      margin-bottom: 4px;
      margin-top: 2px;
    }
    .meta {
      font-size: 10px;
      color: #777;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="title">오늘의 감정 기반 추천</div>
    <div class="subtitle">지금 끌리는 색과 형태를 고르면, 오늘의 상태에 맞는 커피와 차를 제안합니다.</div>

    <!-- STEP 1: COLOR -->
    <div id="step-color">
      <div class="section-label">Step 1</div>
      <div class="question">오늘 지금, 가장 끌리는 색을 하나 눌러 주세요.</div>
      <div class="grid colors" id="color-grid"></div>
    </div>

    <!-- STEP 2: SHAPE -->
    <div id="step-shape" style="display:none;">
      <div class="section-label">Step 2</div>
      <div class="question">이번에는 지금 마음과 가장 비슷한 형태를 골라 주세요.</div>
      <div class="grid shapes" id="shape-grid"></div>

      <div class="actions">
        <button class="btn secondary" id="back-to-color">이전</button>
        <button class="btn primary" id="show-result">결과 보기</button>
      </div>
    </div>

    <!-- RESULT -->
    <div id="result-section" style="display:none;">
      <div class="section-label">Result</div>
      <div class="question">오늘의 감정 리포트</div>
      <div class="result-card" id="result-card"></div>

      <div class="actions">
        <button class="btn secondary" id="reset">처음으로</button>
      </div>
    </div>
  </div>

  <script>
    // 색상 정의 (선택 화면에서는 텍스트를 전혀 보여주지 않음)
    const colors = [
      { id: "blue",   css: "#3A7BFF" },
      { id: "green",  css: "#39B37F" },
      { id: "yellow", css: "#F6C945" },
      { id: "orange", css: "#F48A3C" },
      { id: "red",    css: "#E94444" },
      { id: "purple", css: "#A463E8" },
      { id: "black",  css: "#111111" },
      { id: "white",  css: "#f5f5f5" },
    ];

    // 도형 정의 (선택 화면에서 텍스트 없음)
    const shapes = [
      { id: "circle",    type: "soft" },
      { id: "square",    type: "stable" },
      { id: "triangle",  type: "dynamic" },
      { id: "curve",     type: "soft" },
      { id: "line",      type: "stable" },
      { id: "irregular", type: "dynamic" },
    ];

    let selectedColor = null;
    let selectedShape = null;

    const colorGrid = document.getElementById("color-grid");
    const shapeGrid = document.getElementById("shape-grid");
    const stepColor = document.getElementById("step-color");
    const stepShape = document.getElementById("step-shape");
    const resultSection = document.getElementById("result-section");
    const resultCard = document.getElementById("result-card");

    // 색상 버튼 생성
    colors.forEach(color => {
      const btn = document.createElement("button");
      btn.className = "option";
      btn.dataset.id = color.id;

      const circle = document.createElement("div");
      circle.className = "color-circle";
      circle.style.background = color.css;

      btn.appendChild(circle);

      btn.addEventListener("click", () => {
        selectedColor = color.id;
        [...colorGrid.children].forEach(c => c.classList.remove("selected"));
        btn.classList.add("selected");
        // 자동으로 다음 단계로 이동
        stepColor.style.display = "none";
        stepShape.style.display = "block";
      });

      colorGrid.appendChild(btn);
    });

    // 도형 버튼 생성
    shapes.forEach(shape => {
      const btn = document.createElement("button");
      btn.className = "option";
      btn.dataset.id = shape.id;

      const icon = document.createElement("div");
      icon.className = "shape-icon";

      const inner = document.createElement("div");
      inner.className = "shape-" + shape.id;
      icon.appendChild(inner);

      btn.appendChild(icon);

      btn.addEventListener("click", () => {
        selectedShape = shape.id;
        [...shapeGrid.children].forEach(c => c.classList.remove("selected"));
        btn.classList.add("selected");
      });

      shapeGrid.appendChild(btn);
    });

    // 뒤로가기
    document.getElementById("back-to-color").addEventListener("click", () => {
      stepShape.style.display = "none";
      stepColor.style.display = "block";
    });

    // 결과 보기
    document.getElementById("show-result").addEventListener("click", () => {
      if (!selectedColor || !selectedShape) {
        alert("색과 형태를 모두 하나씩 선택해 주세요.");
        return;
      }
      const result = computeRecommendation(selectedColor, selectedShape);
      renderResult(result);
      stepShape.style.display = "none";
      resultSection.style.display = "block";
    });

    // 리셋
    document.getElementById("reset").addEventListener("click", () => {
      selectedColor = null;
      selectedShape = null;
      [...colorGrid.children].forEach(c => c.classList.remove("selected"));
      [...shapeGrid.children].forEach(c => c.classList.remove("selected"));
      resultCard.innerHTML = "";
      resultSection.style.display = "none";
      stepColor.style.display = "block";
    });

    // 감정 & 커피/차 추천 로직
    function computeRecommendation(colorId, shapeId) {
      const shapeMeta = shapes.find(s => s.id === shapeId);
      const shapeType = shapeMeta ? shapeMeta.type : "soft";

      let tag = "";
      let emotion = "";
      let description = "";
      let coffee = "";
      let tea = "";

      switch (colorId) {
        case "blue":
          tag = "CALM · CLEAR";
          emotion = "차분함과 정리가 필요해 보이는 상태";
          description = "머릿속에 생각이 많지만, 크게 요동치지 않고 정리하고 싶은 마음이 있는 날입니다.";
          coffee = "클린 워시드 싱글오리진 필터커피";
          tea = "은은한 재스민 티";
          break;
        case "green":
          tag = "RECOVER · BALANCE";
          emotion = "회복과 균형을 원하는 상태";
          description = "몸과 마음 에너지가 조금 내려간 상태에서, 다시 균형을 회복하고 싶은 마음이 느껴집니다.";
          coffee = "고소한 미디엄 라떼";
          tea = "캐모마일 허브티";
          break;
        case "yellow":
          tag = "ENERGY · JOY";
          emotion = "에너지와 재미를 찾는 상태";
          description = "하루에 활력을 더 넣고 싶거나, 가벼운 즐거움을 찾는 밝은 톤의 상태입니다.";
          coffee = "밝은 산미의 싱글오리진 필터커피";
          tea = "레몬 허니티";
          break;
        case "orange":
          tag = "SOCIAL · WARM";
          emotion = "사람과의 대화·교류를 원하는 상태";
          description = "혼자 있는 것보다는 주변 사람과 가볍게 섞이고 싶은 따뜻한 에너지의 날입니다.";
          coffee = "카라멜 라떼";
          tea = "복숭아 향 홍차";
          break;
        case "red":
          tag = "ALERT · INTENSE";
          emotion = "각성이 높거나, 약간의 긴장과 압박이 섞인 상태";
          description = "감정 에너지가 강하게 올라온 상태일 수 있고, 집중·스트레스가 함께 존재할 수도 있습니다.";
          coffee = "더블 에스프레소";
          tea = "생강 레몬티";
          break;
        case "purple":
          tag = "DEEP · SENSITIVE";
          emotion = "사유와 감성이 깊어진 상태";
          description = "내향적으로 생각이 깊어지거나, 예술적·감성적인 상태에 가까운 날입니다.";
          coffee = "다크 초콜릿 노트의 라떼";
          tea = "얼그레이 라벤더 티";
          break;
        case "black":
          tag = "PROTECT · RESET";
          emotion = "과부하 또는 자기 보호가 필요한 상태";
          description = "에너지가 많이 소진됐거나, 조용한 보호막이 필요해서 스스로를 지키고 싶은 마음이 느껴집니다.";
          coffee = "디카페인 플랫 화이트";
          tea = "루이보스 바닐라 티";
          break;
        case "white":
          tag = "RESET · LIGHT";
          emotion = "정리·리셋·새 출발을 원하는 상태";
          description = "머릿속을 가볍게 비우고, 다시 정돈된 상태로 시작하고 싶은 마음이 있는 날입니다.";
          coffee = "담백한 무가당 라떼";
          tea = "가벼운 화이트 티 또는 연한 녹차";
          break;
      }

      let tuneNote = "";
      if (shapeType === "soft") {
        tuneNote = "오늘은 자극보다는 부드러운 밸런스를 조금 더 강조해 주세요. 텍스처를 매끄럽게 가져가는 쪽이 좋습니다.";
      } else if (shapeType === "stable") {
        tuneNote = "맛의 구조가 분명하게 느껴지도록 산미·단맛·바디의 균형을 또렷하게 나눠 주면 좋습니다.";
      } else if (shapeType === "dynamic") {
        tuneNote = "한 지점(산미, 단맛, 향) 정도는 조금 더 과감하게 강조해 주면, 기억에 남는 한 컵이 되기 좋습니다.";
      }

      const baristaHint =
        "바리스타 메모: 손님의 선택은 언어가 아니라 감각에서 나온 것이므로, 오늘 컨디션을 한 번 더 가볍게 물어본 뒤 강도(카페인·온도·당도)를 조정해 주세요.";

      return { tag, emotion, description, coffee, tea, tuneNote, baristaHint };
    }

    function renderResult(result) {
      resultCard.innerHTML = "";

      const tagEl = document.createElement("div");
      tagEl.className = "result-tag";
      tagEl.textContent = result.tag;

      const emotionEl = document.createElement("div");
      emotionEl.className = "result-emotion";
      emotionEl.textContent = result.emotion;

      const descEl = document.createElement("div");
      descEl.className = "result-text";
      descEl.textContent = result.description;

      const coffeeTitle = document.createElement("div");
      coffeeTitle.className = "result-subtitle";
      coffeeTitle.textContent = "오늘 추천 커피";

      const coffeeText = document.createElement("div");
      coffeeText.className = "result-text";
      coffeeText.textContent = "· " + result.coffee;

      const teaTitle = document.createElement("div");
      teaTitle.className = "result-subtitle";
      teaTitle.textContent = "오늘 추천 차 (TEA)";

      const teaText = document.createElement("div");
      teaText.className = "result-text";
      teaText.textContent = "· " + result.tea;

      const tuneTitle = document.createElement("div");
      tuneTitle.className = "result-subtitle";
      tuneTitle.textContent = "형태 선택으로 읽히는 추가 톤";

      const tuneText = document.createElement("div");
      tuneText.className = "result-text";
      tuneText.textContent = result.tuneNote;

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = result.baristaHint;

      resultCard.appendChild(tagEl);
      resultCard.appendChild(emotionEl);
      resultCard.appendChild(descEl);
      resultCard.appendChild(coffeeTitle);
      resultCard.appendChild(coffeeText);
      resultCard.appendChild(teaTitle);
      resultCard.appendChild(teaText);
      resultCard.appendChild(tuneTitle);
      resultCard.appendChild(tuneText);
      resultCard.appendChild(meta);
    }
  </script>
</body>
</html>
