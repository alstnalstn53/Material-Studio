<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>오늘의 감정 기반 커피 · 차 추천</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    body {
      background: #111;
      color: #f5f5f5;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }
    .app {
      width: 100%;
      max-width: 480px;
      background: #181818;
      border-radius: 24px;
      padding: 24px 20px 28px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
    }
    .title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .subtitle {
      font-size: 13px;
      color: #aaaaaa;
      margin-bottom: 16px;
    }
    .question {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 16px;
    }
    .section-label {
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #888;
      margin-bottom: 6px;
    }
    .grid {
      display: grid;
      gap: 14px;
      margin-bottom: 18px;
      justify-items: center;
    }
    .grid.colors {
      grid-template-columns: repeat(4, 1fr);
    }
    .grid.shapes {
      grid-template-columns: repeat(3, 1fr);
    }
    button.option {
      border: none;
      border-radius: 18px;
      padding: 12px;
      background: #262626;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.12s ease, outline 0.12s ease;
      width: 72px;
      height: 72px;
    }
    button.option.selected {
      outline: 2px solid #ffffff;
      box-shadow: 0 0 0 1px rgba(255,255,255,0.2);
      transform: translateY(-1px);
      background: #303030;
    }
    .color-circle {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.35);
    }
    .shape-icon {
      width: 40px;
      height: 40px;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .shape-circle {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 2px solid #f5f5f5;
    }
    .shape-square {
      width: 28px;
      height: 28px;
      border: 2px solid #f5f5f5;
    }
    .shape-triangle {
      width: 0;
      height: 0;
      border-left: 16px solid transparent;
      border-right: 16px solid transparent;
      border-bottom: 28px solid #f5f5f5;
    }
    .shape-curve {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: 2px solid transparent;
      border-top-color: #f5f5f5;
      border-right-color: #f5f5f5;
      transform: rotate(20deg);
    }
    .shape-line {
      width: 30px;
      height: 2px;
      background: #f5f5f5;
    }
    .shape-irregular {
      width: 26px;
      height: 26px;
      border-radius: 40% 65% 35% 70%;
      border: 2px solid #f5f5f5;
      transform: rotate(-12deg);
    }
    .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
      gap: 8px;
    }
    .btn {
      border-radius: 999px;
      border: none;
      padding: 10px 16px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.12s ease, transform 0.08s ease, box-shadow 0.08s ease;
    }
    .btn.primary {
      background: #ffffff;
      color: #111;
      flex: 1;
    }
    .btn.secondary {
      background: #2b2b2b;
      color: #f5f5f5;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: none;
    }
    .result-card {
      margin-top: 10px;
      padding: 16px 14px;
      border-radius: 18px;
      background: #202020;
      border: 1px solid #333;
    }
    .result-tag {
      display: inline-flex;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 10px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: #333;
      color: #bbb;
      margin-bottom: 8px;
    }
    .result-emotion {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .result-text {
      font-size: 12px;
      color: #cccccc;
      margin-bottom: 10px;
      line-height: 1.5;
    }
    .result-subtitle {
      font-size: 11px;
      color: #999;
      margin-bottom: 4px;
      margin-top: 2px;
    }
    .meta {
      font-size: 10px;
      color: #777;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="title">오늘의 감정 기반 추천</div>
    <div class="subtitle">지금 끌리는 색과 형태를 고르면, 오늘의 상태에 맞는 커피와 차를 제안합니다.</div>

    <!-- STEP 1: COLOR -->
    <div id="step-color">
      <div class="section-label">Step 1</div>
      <div class="question">오늘 지금, 가장 끌리는 색을 하나 눌러 주세요.</div>
      <div class="grid colors" id="color-grid"></div>
    </div>

    <!-- STEP 2: SHAPE -->
    <div id="step-shape" style="display:none;">
      <div class="section-label">Step 2</div>
      <div class="question">이번에는 지금 마음과 가장 비슷한 형태를 골라 주세요.</div>
      <div class="grid shapes" id="shape-grid"></div>

      <div class="actions">
        <button class="btn secondary" id="back-to-color">이전</button>
        <button class="btn primary" id="show-result">결과 보기</button>
      </div>
    </div>

    <!-- RESULT -->
    <div id="result-section" style="display:none;">
      <div class="section-label">Result</div>
      <div class="question">오늘의 감정 리포트</div>
      <div class="result-card" id="result-card"></div>

      <div class="actions">
        <button class="btn secondary" id="reset">처음으로</button>
      </div>
    </div>
  </div>

  <script>
    // 색상 정의 (선택 화면에서는 텍스트를 전혀 보여주지 않음)
    const colors = [
      { id: "blue",   css: "#3A7BFF" },
      { id: "green",  css: "#39B37F" },
      { id: "yellow", css: "#F6C945" },
      { id: "orange", css: "#F48A3C" },
      { id: "red",    css: "#E94444" },
      { id: "purple", css: "#A463E8" },
      { id: "black",  css: "#111111" },
      { id: "white",  css: "#f5f5f5" },
    ];

    // 도형 정의 (선택 화면에서 텍스트 없음)
    const shapes = [
      { id: "circle",    type: "soft" },
      { id: "square",    type: "stable" },
      { id: "triangle",  type: "dynamic" },
      { id: "curve",     type: "soft" },
      { id: "line",      type: "stable" },
      { id: "irregular", type: "dynamic" },
    ];

    let selectedColor = null;
    let selectedShape = null;

    const colorGrid = document.getElementById("color-grid");
    const shapeGrid = document.getElementById("shape-grid");
    const stepColor = document.getElementById("step-color");
    const stepShape = document.getElementById("step-shape");
    const resultSection = document.getElementById("result-section");
    const resultCard = document.getElementById("result-card");

    // 색상 버튼 생성
    colors.forEach(color => {
      const btn = document.createElement("button");
      btn.className = "option";
      btn.dataset.id = color.id;

      const circle = document.createElement("div");
      circle.className = "color-circle";
      circle.style.background = color.css;

      btn.appendChild(circle);

      btn.addEventListener("click", () => {
        selectedColor = color.id;
        [...colorGrid.children].forEach(c => c.classList.remove("selected"));
        btn.classList.add("selected");
        // 자동으로 다음 단계로 이동
        stepColor.style.display = "none";
        stepShape.style.display = "block";
      });

      colorGrid.appendChild(btn);
    });

    // 도형 버튼 생성
    shapes.forEach(shape => {
      const btn = document.createElement("button");
      btn.className = "option";
      btn.dataset.id = shape.id;

      const icon = document.createElement("div");
      icon.className = "shape-icon";

      const inner = document.createElement("div");
      inner.className = "shape-" + shape.id;
      icon.appendChild(inner);

      btn.appendChild(icon);

      btn.addEventListener("click", () => {
        selectedShape = shape.id;
        [...shapeGrid.children].forEach(c => c.classList.remove("selected"));
        btn.classList.add("selected");
      });

      shapeGrid.appendChild(btn);
    });

    // 뒤로가기
    document.getElementById("back-to-color").addEventListener("click", () => {
      stepShape.style.display = "none";
      stepColor.style.display = "block";
    });

    // 결과 보기
    document.getElementById("show-result").addEventListener("click", () => {
      if (!selectedColor || !selectedShape) {
        alert("색과 형태를 모두 하나씩 선택해 주세요.");
        return;
      }
      const result = computeRecommendation(selectedColor, selectedShape);
      renderResult(result);
      stepShape.style.display = "none";
      resultSection.style.display = "block";
    });

    // 리셋
    document.getElementById("reset").addEventListener("click", () => {
      selectedColor = null;
      selectedShape = null;
      [...colorGrid.children].forEach(c => c.classList.remove("selected"));
      [...shapeGrid.children].forEach(c => c.classList.remove("selected"));
      resultCard.innerHTML = "";
      resultSection.style.display = "none";
      stepColor.style.display = "block";
    });

    // 감정 & 커피/차 추천 로직
    function computeRecommendation(colorId, shapeId) {
      const shapeMeta = shapes.find(s => s.id === shapeId);
      const shapeType = shapeMeta ? shapeMeta.type : "soft";

      let tag = "";
      let emotion = "";
      let description = "";
      let coffee = "";
      let tea = "";

      switch (colorId) {
        case "blue":
          tag = "CALM · CLEAR";
          emotion = "차분함과 정리가 필요해 보이는 상태";
          description = "머릿속에 생각이 많지만, 크게 요동치지 않고 정리하고 싶은 마음이 있는 날입니다.";
          coffee = "클린 워시드 싱글오리진 필터커피";
          tea = "은은한 재스민 티";
          break;
        case "green":
          tag = "RECOVER · BALANCE";
          emotion = "회복과 균형을 원하는 상태";
          description = "몸과 마음 에너지가 조금 내려간 상태에서, 다시 균형을 회복하고 싶은 마음이 느껴집니다.";
          coffee = "고소한 미디엄 라떼";
          tea = "캐모마일 허브티";
          break;
        case "yellow":
          tag = "ENERGY · JOY";
          emotion = "에너지와 재미를 찾는 상태";
          description = "하루에 활력을 더
